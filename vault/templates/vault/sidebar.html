{% load i18n static dashboard_tags vault_tags %}
{% can_view_team_users as can_view_tusers %}

<!-- sidebar -->
<nav id="sidebar" class="col-md-2">

  <a href="{% url 'dashboard' %}" class="vault-logo">
    <img src="{% static 'vault/img/logo-white.svg' %}" alt="Vault">
  </a>
  <span class="vault-env {% get_vault_env %}">{% get_vault_env %}</span>

  {#% set_project %#}

  <div class="current-project dropdown">
    <button class="btn btn-primary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      {{ project_name }}
    </button>
    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
      <a class="dropdown-item" href="#"><i class="icon fa fa-exchange-alt"></i> {% trans "Change Project" %}</a>
      <a class="dropdown-item" href="#"><i class="icon fa fa-edit"></i> {% trans "Edit Project" %}</a>
    </div>
  </div>

  <ul class="app-menus" id="sidebar-app-menus">
    <li>
      <a href="{% url 'dashboard' %}" title="{% trans 'Home' %}" data-toggle="tooltip" data-placement="right">
        <i class="icon fa fa-home"></i> Home
      </a>
    </li>
    <li>
      <a href="{% url 'update_teams_users' %}" title="{% trans 'Manage Team' %}"
         data-toggle="tooltip" data-placement="right">
        <i class="icon fa fa-users-cog"></i> Manage my Team
      </a>
    </li>
  </ul>

  <ul class="admin-menus" id="sidebar-admin-menus">
    {% if user.is_staff %}
    <li>
      <a href="{% url 'admin:index' %}" title="{% trans 'Settings' %}" data-toggle="tooltip" data-placement="right">
        <i class="icon fa fa-cog"></i> Settings
      </a>
    </li>
    {% endif %}
    {% if can_view_tusers %}
    <li>
      <a href="{% url 'team_users' %}" title="Teams and Users" data-toggle="tooltip" data-placement="right">
        <i class="icon fa fa-building"></i> Teams and Users
      </a>
    </li>
    {% endif %}
  </ul>

  <script type="text/html" id="menu_icon_default">
    <a href="<%=url%>" title="<%=name%>" data-toggle="tooltip" data-placement="right">
      <i class="icon <%=icon%>"></i> <%=name%>
    </a>
  </script>

  <script src="{% static 'vault/js/menu.js' %}"></script>

  <script>
    {% autoescape off %}
    var endpoints = [{% info_endpoints %}];
    {% endautoescape %}
    VaultMenu.init(endpoints);
  </script>

</nav>
<!-- /sidebar -->
